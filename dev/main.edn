{:http {:port 1312
        :handler #ig/ref :bread/handler
        :wrap-defaults #ig/ref :ring/wrap-defaults}
 :ring/wrap-defaults {:kind :site-defaults
                      :session-store #ig/ref :ring/session-store
                      :overrides {[:security :anti-forgery] false}}
 :ring/session-store
 {:store/type :datalog
  :store/db #ig/ref :bread/db}
 :bread/handler #ig/ref :bread/app
 :bread/app
 {:site {:name "Breadbox"}
  :db #ig/ref :bread/db
  :auth {:protected-prefixes ["_____"]
         :login-uri "/~/login"
         ;:require-mfa? true
         :min-password-length 4}
  :signup {:signup-uri "/~/signup"
           :invite-only? true}
  :account {:account-uri "/~/account"}
  :i18n {:home-route :home
         :query-global-strings? false
         :supported-langs #{:en :fr :es :ar}
         :fallback-lang :ar}
  :routes {:router #ig/ref :bread/router}
  :components {:not-found #var systems.bread.alpha.cms.theme/NotFoundPage}
  :navigation {:menus {:main-nav
                       {:menu/type :systems.bread.alpha.navigation/location
                        :menu/location :primary
                        :route/name :page}}}
  :plugins []} ;; define additional plugins here
 :bread/db
 {:db/type :datahike
  #_#_
  :db/recreate? true
  :db/config {:schema-flexibility :write
              :keep-history? true
              :store {:backend :jdbc
                      :dbtype "sqlite"
                      :user "bread"
                      :password "bread"
                      :dbname "bread.db"}}
  :db/migrations #deref #var systems.bread.alpha.schema/initial
  ;; db logs can be noisy, so load logging config first
  :__after #ig/ref :app/log}
 :app/log
 {:min-level :info}
 #_#_
 :bread/profilers
 [{:hook #{:systems.bread.alpha.core/request}
   ;:action/name #{:systems.bread.alpha.cms.defaults/response}
   :f #var systems.bread.alpha.cms.main/log-hook}
  {:expansion #{:systems.bread.alpha.database/query}
   :f #var systems.bread.alpha.cms.main/log-expansion}]
 #_#_
 :bread/debugger
 {:http
  {:port 1313
   :docroot "public/debugger"
   :middleware [#var systems.bread.alpha.cms.main/wrap-debug]}}}
